
// import React from "react";

// const Project: React.FC = () => {
//     return (
//         <section id="Project" className="flex justify-center ">
//         <div  className="w-[70%]  mt-[80px] ">
//             <h1 className="text-[30px] text-white font-bold p-4">Featured project</h1>
//             <p className="text-[20px] text-white p-4">I have worked on many projects over the course of being a Web Developer, here are a few of my live, real-world projects</p>

//             <div className="flex justify-between  p-4">
//                 <div className="bg-slate-800   w-[310px] h-[460px] rounded-lg border-2 ">
//                     <div className="flex flex-col">
//                         <div className="flex justify-center">
//                             <img  
//                             className="w-[290px] h-[280px] object-cover mt-[10px]  rounded-lg "
//                             src="/pic.jpeg"
//                             alt="" />
//                         </div>
//                         <div className="flex justify-center flex-col items-center">
//                             <h1 className="text-[20px] text-blue-400 font-bold mt-[5px] ">Miniblock</h1>
//                             <p className="text-center text-white mt-[5px]"> Hi, my name is Jayjay Dinero Dinero, <br /> i am a Fullstack web developer, UI designer, and Mobile developer. I  <br />jhave  honed my skills in Web </p>
//                         </div>
//                     </div>
//                 </div>
//                 <div className="bg-slate-800   w-[310px] h-[460px] rounded-lg border-2 ">
//                     <div className="flex flex-col">
//                         <div className="flex justify-center">
//                             <img  
//                             className="w-[290px] h-[280px] object-cover mt-[10px]  rounded-lg "
//                             src="/pic.jpeg"
//                             alt="" />
//                         </div>
//                         <div className="flex justify-center flex-col items-center">
//                             <h1 className="text-[20px] text-blue-400 font-bold mt-[5px] ">AgroMaket</h1>
//                             <p className="text-center text-white mt-[5px]"> Hi, my name is Jayjay Dinero Dinero, <br /> i am a Fullstack web developer, UI designer, and Mobile developer. I  <br />jhave  honed my skills in Web </p>
//                         </div>
//                     </div>
//                 </div>
//                 <div className="bg-slate-800   w-[310px] h-[460px] rounded-lg border-2 ">
//                     <div className="flex flex-col">
//                         <div className="flex justify-center">
//                             <img  
//                             className="w-[290px] h-[280px] object-cover mt-[10px]  rounded-lg "
//                             src="/pic.jpeg"
//                             alt="" />
//                         </div>
//                         <div className="flex justify-center flex-col items-center">
//                             <h1 className="text-[20px] text-blue-400 font-bold mt-[5px] ">Library Managrment System</h1>
//                             <p className="text-center text-white mt-[5px]"> Hi, my name is Jayjay Dinero Dinero, <br /> i am a Fullstack web developer, UI designer, and Mobile developer. I  <br />jhave  honed my skills in Web </p>
//                         </div>
//                     </div>
//                 </div>
//                 <div className="bg-slate-800   w-[310px] h-[460px] rounded-lg border-2 ">
//                     <div className="flex flex-col">
//                         <div className="flex justify-center">
//                             <img  
//                             className="w-[290px] h-[280px] object-cover mt-[10px]  rounded-lg "
//                             src="/pic.jpeg"
//                             alt="" />
//                         </div>
//                         <div className="flex justify-center flex-col items-center">
//                             <h1 className="text-[20px] text-blue-400 font-bold mt-[5px] ">Survey</h1>
//                             <p className="text-center text-white mt-[5px]"> Hi, my name is Jayjay Dinero Dinero, <br /> i am a Fullstack web developer, UI designer, and Mobile developer. I  <br />jhave  honed my skills in Web </p>
//                         </div>
//                     </div>
//                 </div>
//             </div>


//             <div className="flex justify-between  p-4">
//                 <div className="bg-slate-800   w-[310px] h-[460px] rounded-lg border-2 ">
//                     <div className="flex flex-col">
//                         <div className="flex justify-center">
//                             <img  
//                             className="w-[290px] h-[280px] object-cover mt-[10px]  rounded-lg "
//                             src="/pic.jpeg"
//                             alt="" />
//                         </div>
//                         <div className="flex justify-center flex-col items-center">
//                             <h1 className="text-[20px] text-blue-400 font-bold mt-[5px] ">weather API</h1>
//                             <p className="text-center text-white mt-[5px]"> Hi, my name is Jayjay Dinero Dinero, <br /> i am a Fullstack web developer, UI designer, and Mobile developer. I  <br />jhave  honed my skills in Web </p>
//                         </div>
//                     </div>
//                 </div>

//                 <div className="bg-slate-800   w-[310px] h-[460px] rounded-lg border-2 ">
//                     <div className="flex flex-col">
//                         <div className="flex justify-center">
//                             <img  
//                             className="w-[290px] h-[280px] object-cover mt-[10px]  rounded-lg "
//                             src="/pic.jpeg"
//                             alt="" />
//                         </div>
//                         <div className="flex justify-center flex-col items-center">
//                             <h1 className="text-[20px] text-blue-400 font-bold mt-[5px] ">Selling </h1>
//                             <p className="text-center text-white mt-[5px]"> Hi, my name is Jayjay Dinero Dinero, <br /> i am a Fullstack web developer, UI designer, and Mobile developer. I  <br />jhave  honed my skills in Web </p>
//                         </div>
//                     </div>
//                 </div>

//                 <div className="bg-slate-800   w-[310px] h-[460px] rounded-lg border-2 ">
//                     <div className="flex flex-col">
//                         <div className="flex justify-center">
//                             <img  
//                             className="w-[290px] h-[280px] object-cover mt-[10px]  rounded-lg "
//                             src="/pic.jpeg"
//                             alt="" />
//                         </div>
//                         <div className="flex justify-center flex-col items-center">
//                             <h1 className="text-[20px] text-blue-400 font-bold mt-[5px] ">Frairy-tale</h1>
//                             <p className="text-center text-white mt-[5px]"> Hi, my name is Jayjay Dinero Dinero, <br /> i am a Fullstack web developer, UI designer, and Mobile developer. I  <br />jhave  honed my skills in Web </p>
//                         </div>
//                     </div>
//                 </div>

//                 <div className="bg-slate-800   w-[310px] h-[460px] rounded-lg border-2 ">
//                     <div className="flex flex-col">
//                         <div className="flex justify-center">
//                             <img  
//                             className="w-[290px] h-[280px] object-cover mt-[10px]  rounded-lg "
//                             src="/pic.jpeg"
//                             alt="" />
//                         </div>
//                         <div className="flex justify-center flex-col items-center">
//                             <h1 className="text-[20px] text-blue-400 font-bold mt-[5px] ">Selling Agricultur Product</h1>
//                             <p className="text-center text-white mt-[5px]"> Hi, my name is Jayjay Dinero Dinero, <br /> i am a Fullstack web developer, UI designer, and Mobile developer. I  <br />jhave  honed my skills in Web </p>
//                         </div>
//                     </div>
//                 </div>
//                 </div>

//         </div>

        

        
//         </section>
//     );
// };

// export default Project;


"use client";
import React, { useState, useEffect } from "react";

// Define the interface for the API data
interface ProjectData {
  id: number;
  attributes: {
    title?: string; // Optional in case title is missing
    description?: string; // Optional in case description is missing
    image?: {
      data?: {
        attributes?: {
          formats?: {
            medium?: {
              url?: string; // Optional in case the URL is missing
            };
          };
        };
      };
    };
  };
}

const Project: React.FC = () => {
  const [projects, setProjects] = useState<ProjectData[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null); // Error state

  // Fetch data from the API when the component mounts
  useEffect(() => {
    const fetchProjects = async () => {
      try {
        const res = await fetch("http://localhost:1337/api/pageprojects?populate=*");
        if (!res.ok) {
          throw new Error(`HTTP error! status: ${res.status}`); // Handle non-200 responses
        }
        const result = await res.json();
        setProjects(result.data);
      } catch (error: any) {
        console.error("Error fetching projects:", error);
        setError("Failed to fetch projects."); // Set error message
      } finally {
        setLoading(false);
      }
    };

    fetchProjects();
  }, []);

  if (loading) {
    return <p className="text-white">Loading projects...</p>;
  }

  if (error) {
    return <p className="text-red-500">{error}</p>; // Display error message
  }

  return (
    <section id="Project" className="flex justify-center">
      <div className="w-[70%] mt-[80px]">
        <h1 className="text-[30px] text-white font-bold p-4">Featured Projects</h1>
        <p className="text-[20px] text-white p-4">
          I have worked on many projects over the course of being a Web Developer,
          here are a few of my live, real-world projects
        </p>

        <div className="flex justify-between flex-wrap p-4">
          {projects.map((project) => {
            // Check if the image URL exists
            const imageUrl = project.attributes?.image?.data?.attributes?.formats?.medium?.url;
            console.log('Image URL:', imageUrl); // Log the image URL for debugging
            
            return (
              <div key={project.id} className="bg-slate-800 w-[310px] h-[460px] rounded-lg border-2 mb-6">
                <div className="flex flex-col">
                  <div className="flex justify-center">
                    <img
                      className="w-[290px] h-[280px] object-cover mt-[10px] rounded-lg"
                      src={imageUrl ? `http://localhost:1337${imageUrl}` : '/path/to/default/image.jpg'} // Fallback image
                      alt={project.attributes?.title || "Project image"} // Fallback if title is undefined
                    />
                  </div>
                  <div className="flex justify-center flex-col items-center">
                    <h1 className="text-[20px] text-blue-400 font-bold mt-[5px]">
                      {project.attributes?.title || "Untitled Project"} {/* Fallback if title is undefined */}
                    </h1>
                    <p className="text-center text-white mt-[5px]">
                      {project.attributes?.description || "No description available"} {/* Fallback if description is undefined */}
                    </p>
                  </div>
                </div>
              </div>
            );
          })}
        </div>
      </div>
    </section>
  );
};

export default Project;

